{% extends "base.html" %}
{% block content %}
<h2 class="section-title">POS / Current Cart</h2>

<!-- Product Grid -->
<div class="product-list">
    {% for product in products %}
    <div class="product-card">
        <div class="product-image">
            {% if product.image %}
            <img src="{{ url_for('static', filename='images/' + product.image) }}" alt="{{ product.name }}">
            {% else %}
            <img src="{{ url_for('static', filename='images/logo.png') }}" alt="{{ product.name }}">
            {% endif %}
        </div>
        <h3>{{ product.name }}</h3>
        <p class="price">{{ product.price }} {{ currency }}</p>
        <a href="{{ url_for('add_to_cart', product_id=product.id) }}" class="add-to-cart">Add to Cart</a>
    </div>
    {% endfor %}
</div>

<!-- Cart Section -->
<h2 class="section-title">Cart</h2>
<form method="POST" action="{{ url_for('update_cart') }}">
    <div class="cart-list">
        {% for item in cart_items %}
        <div class="cart-item">
            <div>
                <strong>{{ item.product_name }}</strong><br>
                Quantity: <input type="number" name="qty_{{ item.id }}" value="{{ item.quantity }}" class="quantity-input" min="0">
                Wastage: <input type="number" name="waste_{{ item.id }}" value="{{ item.wastage }}" class="quantity-input" min="0">
            </div>
            <p>{{ item.price * item.quantity }} {{ currency }}</p>
        </div>
        {% endfor %}
    </div>
    <p><strong>Total: {{ total }} {{ currency }}</strong></p>
    <button type="submit" class="btn">Update Cart</button>
</form>

<form method="POST" action="{{ url_for('checkout') }}">
    <button type="submit" class="btn">Checkout</button>
</form>
{% endblock %}
